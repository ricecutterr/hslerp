{% extends 'admin/layout.html' %}
{% block title %}Note Livrare - HSL ERP{% endblock %}
{% block content %}
<div class="page-header d-flex justify-content-between align-items-center">
    <h2><i class="bi bi-truck me-2"></i>Note de Livrare</h2>
    <span class="badge bg-secondary fs-6">{{ note|length }} note</span>
</div>
<div class="bg-white rounded-3 p-3">
{% if note %}
<table class="table table-hsl table-hover mb-0">
<thead><tr><th>Nr. Notă</th><th>Comandă</th><th>Client</th><th>Produse</th><th>Data</th><th></th></tr></thead>
<tbody>
{% for n in note %}
<tr onclick="location.href='/admin/wms/nota-livrare/{{ n.id }}'" style="cursor:pointer">
    <td><strong>{{ n.numar }}</strong></td>
    <td><a href="/admin/comenzi/{{ n.comanda_id }}">{{ n.comanda.numar }}</a></td>
    <td>{{ n.client.nume if n.client else '-' }}</td>
    <td>
        {% for l in n.picking.linii %}
        <span class="badge bg-light text-dark me-1">{{ l.cod_intern }}: {{ l.cantitate_preluata|int }}</span>
        {% endfor %}
    </td>
    <td class="small text-muted">{{ n.data_creare.strftime('%d.%m.%Y %H:%M') }}</td>
    <td><a href="/admin/wms/nota-livrare/{{ n.id }}/pdf" target="_blank" class="btn btn-outline-secondary btn-sm py-0" onclick="event.stopPropagation()"><i class="bi bi-file-pdf"></i></a></td>
</tr>
{% endfor %}
</tbody></table>
{% else %}
<p class="text-center text-muted py-4">Nicio notă de livrare. Se generează din picking-uri complete.</p>
{% endif %}
</div>
{% endblock %}
