{% extends 'admin/layout.html' %}
{% block title %}{{ client.nume }} - HSL ERP{% endblock %}
{% block content %}
<div class="page-header d-flex justify-content-between align-items-center">
    <h2><i class="bi bi-person me-2"></i>{{ client.nume }}</h2>
    <div><a href="/admin/clienti/{{ client.id }}" class="btn btn-outline-primary me-2"><i class="bi bi-pencil"></i> EditeazÄƒ</a>
    <a href="/configurator" class="btn btn-hsl"><i class="bi bi-gear me-1"></i>OfertÄƒ NouÄƒ</a></div>
</div>
<div class="row g-4">
<div class="col-md-4"><div class="bg-white rounded-3 p-3">
    <h6 class="fw-bold mb-3">Date Client</h6>
    <p><strong>CUI:</strong> {{ client.cui or '-' }}<br><strong>Nr. Reg:</strong> {{ client.nr_reg_com or '-' }}</p>
    <p><strong>Email:</strong> {{ client.email or '-' }}<br><strong>Tel:</strong> {{ client.telefon or '-' }}</p>
    <p><strong>AdresÄƒ:</strong> {{ client.adresa or '-' }}<br>{{ client.oras or '' }} {{ client.judet or '' }}</p>
</div></div>
<div class="col-md-8">
    <!-- OFERTE -->
    <div class="bg-white rounded-3 p-3 mb-3">
        <h6 class="fw-bold">ğŸ“‹ Oferte ({{ client.oferte.count() }})</h6>
        {% for o in client.oferte.all() %}
        <div class="d-flex justify-content-between align-items-center border-bottom py-2">
            <a href="/admin/oferte/{{ o.id }}">{{ o.numar }}</a>
            <span>{{ '{:,.2f}'.format(o.total) }} {{ o.moneda }}</span>
            <span class="badge bg-{% if o.status=='acceptata' %}success{% elif o.status=='comanda' %}primary{% else %}secondary{% endif %}">{{ o.status|title }}</span>
        </div>{% endfor %}
    </div>
    <!-- COMENZI -->
    <div class="bg-white rounded-3 p-3 mb-3">
        <h6 class="fw-bold">ğŸ›’ Comenzi ({{ client.comenzi.count() }})</h6>
        {% for c in client.comenzi.all() %}
        <div class="d-flex justify-content-between align-items-center border-bottom py-2">
            <a href="/admin/comenzi/{{ c.id }}">{{ c.numar }}</a>
            <span>{{ '{:,.2f}'.format(c.total) }} {{ c.moneda }}</span>
            <span class="badge bg-{% if c.status=='finalizata' %}success{% else %}primary{% endif %}">{{ c.status_display }}</span>
        </div>{% endfor %}
    </div>
    <!-- FACTURI -->
    <div class="bg-white rounded-3 p-3">
        <h6 class="fw-bold">ğŸ§¾ Proforme</h6>
        {% for f in client.facturi.all() if f.tip == 'proforma' %}
        <div class="d-flex justify-content-between align-items-center border-bottom py-2">
            <a href="/admin/facturi/{{ f.id }}">{{ f.numar_complet }}</a>
            <span>{{ '{:,.2f}'.format(f.total) }} {{ f.moneda }}</span>
            <span class="badge bg-{% if f.status=='incasata' %}success{% elif f.status=='confirmata' %}info{% elif f.status=='partial' %}info{% else %}warning{% endif %}">{{ 'PlÄƒtitÄƒ' if f.status=='incasata' else 'ConfirmatÄƒ' if f.status=='confirmata' else 'NeplÄƒtitÄƒ' }}</span>
        </div>{% else %}<p class="text-muted small">Nicio proformÄƒ.</p>{% endfor %}
        
        <h6 class="fw-bold mt-3">ğŸ§¾ Facturi Fiscale</h6>
        {% for f in client.facturi.all() if f.tip == 'fiscala' %}
        <div class="d-flex justify-content-between align-items-center border-bottom py-2">
            <a href="/admin/facturi/{{ f.id }}">{{ f.numar_complet }}</a>
            <span>{{ '{:,.2f}'.format(f.total) }} {{ f.moneda }}</span>
            <span class="badge bg-{% if f.status=='incasata' %}success{% else %}warning{% endif %}">{{ f.status|title }}</span>
        </div>{% else %}<p class="text-muted small">Nicio facturÄƒ fiscalÄƒ.</p>{% endfor %}
    </div>
</div></div>
{% endblock %}
